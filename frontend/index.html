<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EONIX â€¢ Autonomous Agent</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=JetBrains+Mono:wght@300;400;500&display=swap"
    rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <style>
    :root {
      --bg: #04050a;
      --bg1: #080b14;
      --bg2: #0c1020;
      --bg3: #111828;
      --border: rgba(255, 255, 255, 0.055);
      --border2: rgba(255, 255, 255, 0.10);
      --accent: #6366f1;
      --accent-glow: rgba(99, 102, 241, 0.25);
      --cyan: #06b6d4;
      --violet: #a78bfa;
      --green: #10b981;
      --amber: #f59e0b;
      --red: #ef4444;
      --t0: #f8faff;
      --t1: rgba(248, 250, 255, 0.80);
      --t2: rgba(248, 250, 255, 0.45);
      --t3: rgba(248, 250, 255, 0.22);
      --t4: rgba(248, 250, 255, 0.10);
      --sidebar-w: 64px;
      --right-w: 300px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: var(--bg);
      color: var(--t1);
      font-family: 'Syne', sans-serif;
      height: 100vh;
      overflow: hidden;
      display: flex;
    }

    /* â”€â”€â”€ SIDEBAR â”€â”€â”€ */
    .sidebar {
      width: var(--sidebar-w);
      background: var(--bg1);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px 0;
      gap: 12px;
      z-index: 100;
      transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .sidebar:hover {
      width: 72px;
    }

    .nav-icon {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--t3);
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
    }

    .nav-icon:hover,
    .nav-icon.active {
      color: var(--accent);
      background: rgba(99, 102, 241, 0.1);
      transform: scale(1.1);
    }

    .nav-icon.logo {
      color: var(--accent);
      margin-bottom: 20px;
    }

    .nav-icon.user {
      margin-top: auto;
      color: var(--t4);
    }

    /* â”€â”€â”€ MAIN CONTENT â”€â”€â”€ */
    .main-canvas {
      flex: 1;
      display: flex;
      flex-direction: column;
      position: relative;
      overflow: hidden;
    }

    /* Topbar */
    .topbar {
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 24px;
      border-bottom: 1px solid var(--border);
      background: rgba(4, 5, 10, 0.4);
      backdrop-filter: blur(20px);
    }

    .top-title {
      font-weight: 800;
      letter-spacing: 0.2em;
      font-size: 14px;
    }

    .top-status {
      font-family: 'JetBrains Mono';
      font-size: 10px;
      color: var(--t3);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--green);
      box-shadow: 0 0 10px var(--green);
    }

    /* Chat Area */
    .chat-container {
      flex: 1;
      overflow-y: auto;
      padding: 40px 20px;
      scroll-behavior: smooth;
    }

    .chat-inner {
      max-width: 800px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    .welcome-hero {
      text-align: left;
      opacity: 0;
    }

    .hero-h1 {
      font-size: 48px;
      font-weight: 800;
      line-height: 1;
      color: var(--t0);
      margin-bottom: 15px;
    }

    .grad {
      background: linear-gradient(90deg, var(--accent), var(--cyan), var(--violet));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .hero-sub {
      color: var(--t2);
      font-size: 14px;
      max-width: 400px;
      line-height: 1.6;
    }

    /* Bubbles */
    .msg {
      display: flex;
      flex-direction: column;
      gap: 4px;
      opacity: 0;
    }

    .msg.user {
      align-items: flex-end;
    }

    .bubble {
      max-width: 85%;
      padding: 16px 20px;
      font-size: 14px;
      line-height: 1.6;
      border-radius: 16px;
      position: relative;
    }

    .user .bubble {
      background: var(--bg2);
      border: 1px solid var(--border2);
      color: var(--t1);
      border-bottom-right-radius: 4px;
    }

    .ai .bubble {
      background: transparent;
      border-left: 2px solid var(--accent);
      color: var(--t1);
      padding-left: 20px;
    }

    .meta {
      font-family: 'JetBrains Mono';
      font-size: 9px;
      color: var(--t3);
      text-transform: uppercase;
    }

    .thinking-logs {
      font-family: 'JetBrains Mono';
      font-size: 11px;
      color: var(--t3);
      margin-top: 10px;
      border-left: 2px solid var(--border);
      padding-left: 12px;
    }

    .log-item {
      margin-bottom: 4px;
    }

    /* Input Zone */
    .input-zone {
      padding: 20px 40px 30px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
    }

    .input-box {
      width: 100%;
      max-width: 800px;
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 12px 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      transition: border 0.3s;
    }

    .input-box:focus-within {
      border-color: var(--accent);
    }

    .input-field {
      flex: 1;
      background: transparent;
      border: none;
      outline: none;
      color: #fff;
      font-family: 'Syne';
      font-size: 15px;
      height: 24px;
      resize: none;
    }

    .send-btn {
      background: var(--accent);
      border: none;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      color: #fff;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.2s;
    }

    .send-btn:hover {
      transform: scale(1.1);
    }

    /* â”€â”€â”€ RIGHT PANEL â”€â”€â”€ */
    .right-panel {
      width: var(--right-w);
      background: var(--bg1);
      border-left: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      padding: 24px;
      gap: 30px;
      z-index: 90;
    }

    .panel-sec h3 {
      font-family: 'JetBrains Mono';
      font-size: 10px;
      color: var(--t3);
      letter-spacing: 0.1em;
      margin-bottom: 15px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 5px;
    }

    .stat-card {
      margin-bottom: 20px;
    }

    .stat-info {
      display: flex;
      justify-content: space-between;
      font-family: 'JetBrains Mono';
      font-size: 12px;
      margin-bottom: 8px;
    }

    .stat-val {
      color: var(--t0);
      font-weight: bold;
    }

    .progress-bg {
      height: 2px;
      background: var(--bg3);
      width: 100%;
      position: relative;
    }

    .progress-bar {
      height: 100%;
      background: var(--accent);
      width: 0%;
      transition: width 0.5s;
      box-shadow: 0 0 10px var(--accent-glow);
    }

    .brain-switcher {
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 5px;
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .brain-opt {
      padding: 10px 12px;
      font-family: 'JetBrains Mono';
      font-size: 11px;
      color: var(--t2);
      border-radius: 8px;
      cursor: pointer;
      transition: 0.2s;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .brain-opt:hover {
      background: var(--bg3);
    }

    .brain-opt.active {
      background: rgba(99, 102, 241, 0.1);
      color: var(--accent);
    }

    .active-dot {
      width: 4px;
      height: 4px;
      border-radius: 50%;
      background: var(--accent);
      display: none;
    }

    .active .active-dot {
      display: block;
    }

    /* Toasts */
    .toast-container {
      position: fixed;
      top: 20px;
      right: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 1000;
    }

    .toast {
      background: var(--bg2);
      border: 1px solid var(--border);
      border-left: 3px solid var(--accent);
      padding: 12px 20px;
      border-radius: 10px;
      backdrop-filter: blur(10px);
      min-width: 250px;
    }

    .toast-h {
      font-size: 12px;
      font-weight: bold;
      color: var(--t0);
      margin-bottom: 4px;
    }

    .toast-m {
      font-size: 11px;
      color: var(--t2);
    }

    /* Utils */
    ::-webkit-scrollbar {
      width: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--bg3);
      border-radius: 2px;
    }

    .blink {
      animation: blink 1s infinite;
    }

    @keyframes blink {
      50% {
        opacity: 0;
      }
    }

    /* Icons (SVGs inline for reliability) */
    .ico {
      fill: none;
      stroke: currentColor;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
    }
  </style>
</head>

<body>

  <!-- LEFT SIDEBAR: 10+ Features -->
  <div class="sidebar">
    <div class="nav-icon logo">
      <svg class="ico" width="24" height="24" viewBox="0 0 24 24">
        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" />
      </svg>
    </div>
    <div class="nav-icon active" title="Chat"><svg class="ico" width="20" height="20" viewBox="0 0 24 24">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
      </svg></div>
    <div class="nav-icon" title="Vision"><svg class="ico" width="20" height="20" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="3" />
        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
      </svg></div>
    <div class="nav-icon" title="Clipboard"><svg class="ico" width="20" height="20" viewBox="0 0 24 24">
        <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" />
        <rect x="8" y="2" width="8" height="4" rx="1" ry="1" />
      </svg></div>
    <div class="nav-icon" title="Security"><svg class="ico" width="20" height="20" viewBox="0 0 24 24">
        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
      </svg></div>
    <div class="nav-icon" title="Files"><svg class="ico" width="20" height="20" viewBox="0 0 24 24">
        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z" />
      </svg></div>
    <div class="nav-icon" title="Monitor"><svg class="ico" width="20" height="20" viewBox="0 0 24 24">
        <path d="M3 3v18h18" />
        <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3" />
      </svg></div>
    <div class="nav-icon" title="Briefing"><svg class="ico" width="20" height="20" viewBox="0 0 24 24">
        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" />
        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" />
      </svg></div>
    <div class="nav-icon" title="Analytics"><svg class="ico" width="20" height="20" viewBox="0 0 24 24">
        <line x1="18" y1="20" x2="18" y2="10" />
        <line x1="12" y1="20" x2="12" y2="4" />
        <line x1="6" y1="20" x2="6" y2="14" />
      </svg></div>
    <div class="nav-icon" title="Workflows"><svg class="ico" width="20" height="20" viewBox="0 0 24 24">
        <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />
      </svg></div>
    <div class="nav-icon" title="Settings"><svg class="ico" width="20" height="20" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="3" />
        <path
          d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
      </svg></div>
    <div class="nav-icon user"><svg class="ico" width="20" height="20" viewBox="0 0 24 24">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
        <circle cx="12" cy="7" r="4" />
      </svg></div>
  </div>

  <!-- MIDDLE: Chat & Commands -->
  <div class="main-canvas">
    <div class="topbar">
      <div class="top-title">EONIX SYSTEM</div>
      <div class="top-status">
        <div class="dot"></div> ONLINE â€¢ <span id="clock">00:00</span>
      </div>
    </div>

    <div class="chat-container" id="scroller">
      <div class="chat-inner" id="stream">
        <div class="welcome-hero" id="hero">
          <div class="hero-h1">I'm EONIX.<br><span class="grad">Automating your desktop.</span></div>
          <p class="hero-sub">Try "Open Notepad", "Search weather in Tokyo", or "Organize my downloads folder".</p>
        </div>
      </div>
    </div>

    <div class="input-zone">
      <div class="input-box">
        <textarea id="cmd-input" class="input-field" placeholder="Enter command or query..." rows="1"></textarea>
        <button class="send-btn" id="send-btn"><svg width="16" height="16" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2.5">
            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" />
          </svg></button>
      </div>
    </div>
  </div>

  <!-- RIGHT: System Dashboard -->
  <div class="right-panel">
    <div class="panel-sec">
      <h3>SYSTEM VITALS</h3>
      <div class="stat-card">
        <div class="stat-info"><span>CPU LOAD</span><span class="stat-val" id="cpu-val">0%</span></div>
        <div class="progress-bg">
          <div class="progress-bar" id="cpu-bar"></div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-info"><span>MEMORY</span><span class="stat-val" id="mem-val">0%</span></div>
        <div class="progress-bg">
          <div class="progress-bar" id="mem-bar"></div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-info"><span>BATTERY</span><span class="stat-val" id="bat-val">100%</span></div>
        <div class="progress-bg">
          <div class="progress-bar" id="bat-bar"></div>
        </div>
      </div>
    </div>

    <div class="panel-sec">
      <h3>ACTIVE BRAIN</h3>
      <div class="brain-switcher" id="brain-selector">
        <div class="brain-opt active" data-brain="auto"><span>AUTO-ROUTE</span>
          <div class="active-dot"></div>
        </div>
        <div class="brain-opt" data-brain="local"><span>LOCAL (OLLAMA)</span>
          <div class="active-dot"></div>
        </div>
        <div class="brain-opt" data-brain="gemini"><span>GEMINI 2.0</span>
          <div class="active-dot"></div>
        </div>
        <div class="brain-opt" data-brain="claude"><span>CLAUDE 3.5</span>
          <div class="active-dot"></div>
        </div>
      </div>
    </div>

    <div class="panel-sec" style="margin-top: auto;">
      <div style="font-size: 10px; color: var(--t4); font-family: 'JetBrains Mono';">
        HOST: 127.0.0.1:8000<br>
        WS: CONNECTED
      </div>
    </div>
  </div>

  <div class="toast-container" id="toasts"></div>

  <script>
    const streamEl = document.getElementById('stream');
    const inputEl = document.getElementById('cmd-input');
    const scroller = document.getElementById('scroller');
    const hero = document.getElementById('hero');

    // â”€â”€â”€ BRAIN SELECTION â”€â”€â”€
    let currentBrain = 'auto';
    document.querySelectorAll('.brain-opt').forEach(opt => {
      opt.onclick = () => {
        document.querySelectorAll('.brain-opt').forEach(o => o.classList.remove('active'));
        opt.classList.add('active');
        currentBrain = opt.dataset.brain;
        showToast("System", `Brain switched to ${currentBrain.toUpperCase()}`);
      };
    });

    // â”€â”€â”€ SIDEBAR INTERACTION â”€â”€â”€
    document.querySelectorAll('.nav-icon:not(.logo):not(.user)').forEach(icon => {
      icon.onclick = () => {
        document.querySelectorAll('.nav-icon').forEach(i => i.classList.remove('active'));
        icon.classList.add('active');
        const view = icon.getAttribute('title');
        showToast("System", `Switched to ${view} view.`);
        // In a real SPA, this would swap panels. For now, we'll just acknowledge.
      };
    });

    // â”€â”€â”€ UTILS â”€â”€â”€
    function showToast(title, msg) {
      const container = document.getElementById('toasts');
      const t = document.createElement('div');
      t.className = 'toast';
      t.innerHTML = `<div class="toast-h">${title}</div><div class="toast-m">${msg}</div>`;
      container.appendChild(t);
      anime({ targets: t, opacity: [0, 1], translateX: [50, 0], duration: 400 });
      setTimeout(() => {
        anime({ targets: t, opacity: 0, translateX: 50, duration: 400, complete: () => t.remove() });
      }, 5000);
    }

    function scrollToBottom() {
      scroller.scrollTop = scroller.scrollHeight;
    }

    // â”€â”€â”€ CHAT & SSE â”€â”€â”€
    let isProcessing = false; // Flag to prevent multiple sends
    inputEl.onkeydown = (e) => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); send(); } };
    document.getElementById('send-btn').onclick = send;

    async function send() {
      const val = inputEl.value.trim();
      if (!val || isProcessing) return;

      inputEl.value = '';
      hero.style.display = 'none';
      isProcessing = true;

      // User Msg
      const uRow = document.createElement('div');
      uRow.className = 'msg user';
      uRow.innerHTML = `<div class="bubble">${val}</div><div class="meta">USER â€¢ ${new Date().toLocaleTimeString()}</div>`;
      streamEl.appendChild(uRow);
      anime({ targets: uRow, opacity: [0, 1], translateY: [10, 0], duration: 400 });

      // AI Msg Placeholder
      const sRow = document.createElement('div');
      sRow.className = 'msg ai';
      sRow.innerHTML = `
        <div class="bubble"><span class="blink">_</span></div>
        <div class="meta">EONIX â€¢ PROCESSING</div>
        <div class="thinking-logs"></div>
      `;
      streamEl.appendChild(sRow);
      // FIX: Animate AI row in!
      anime({ targets: sRow, opacity: [0, 1], translateY: [10, 0], duration: 400 });

      const textEl = sRow.querySelector('.bubble');
      const logsEl = sRow.querySelector('.thinking-logs');
      const sMeta = sRow.querySelector('.meta');

      try {
        const res = await fetch('http://127.0.0.1:8000/api/chat', { // Use absolute URL for consistency
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message: val, stream: true, brain: currentBrain })
        });

        if (!res.ok) throw new Error(`HTTP ${res.status}`);

        const reader = res.body.getReader();
        const decoder = new TextDecoder();
        let buffer = '';

        while (true) {
          const { done, value } = await reader.read();
          if (done) break;
          buffer += decoder.decode(value, { stream: true });

          const lines = buffer.split('\n\n');
          buffer = lines.pop();

          for (const line of lines) {
            if (!line.startsWith('data: ')) continue;
            try {
              const data = JSON.parse(line.slice(6));
              if (data.type === 'thinking') {
                logsEl.innerHTML += `<div class="log-item" style="color:var(--t3); opacity:0.6;">> ${data.message}</div>`;
              }
              else if (data.type === 'action_start') {
                logsEl.innerHTML += `<div class="log-item" style="color:var(--accent); font-weight:bold;">âš¡ Executing ${data.tool}...</div>`;
              }
              else if (data.type === 'completion' || data.type === 'complete') {
                textEl.innerText = data.reply || "Task complete.";
                sMeta.innerText = `EONIX â€¢ ${data.brain ? data.brain.toUpperCase() : 'AI'} â€¢ ${data.duration_ms || 0}ms`;
              }
              scrollToBottom();
            } catch (e) { console.error("Parse error:", e); }
          }
        }
      } catch (e) {
        console.error("Fetch error:", e);
        textEl.innerText = "Connection lost. Please check if the backend is running.";
      } finally {
        isProcessing = false;
        scrollToBottom();
      }
    }

    // â”€â”€â”€ VITALS â”€â”€â”€
    async function pollStats() {
      try {
        const res = await fetch('http://127.0.0.1:8000/api/system/status'); // Use absolute URL
        const data = await res.json();
        const cpu = data.cpu ? data.cpu.percent : (data.cpu_percent || 0);
        const mem = data.memory ? data.memory.percent : (data.memory_percent || 0);
        const bat = data.battery ? data.battery.percent : (data.battery_percent || 100);

        document.getElementById('cpu-val').innerText = Math.round(cpu) + '%';
        document.getElementById('cpu-bar').style.width = cpu + '%';
        document.getElementById('mem-val').innerText = Math.round(mem) + '%';
        document.getElementById('mem-bar').style.width = mem + '%';
        document.getElementById('bat-val').innerText = Math.round(bat) + '%';
        document.getElementById('bat-bar').style.width = bat + '%';
      } catch (e) { }
    }
    setInterval(pollStats, 2500); // Slightly slower interval to reduce network noise
    pollStats();

    // â”€â”€â”€ WEBSOCKET â”€â”€â”€
    function connectWS() {
      const ws = new WebSocket(`ws://127.0.0.1:8000/ws/alerts`); // Use IP for stability
      ws.onopen = () => console.log("ðŸ›¡ï¸ WS: CONNECTED");
      ws.onmessage = (e) => {
        const data = JSON.parse(e.data);
        if (data.type === 'alert' || data.type === 'briefing') {
          let title = data.title || "ALERT";
          let msg = data.message || "New security event";
          if (data.type === 'briefing') { title = "BRIEFING"; msg = "Your report is ready."; }
          showToast(title, msg);
        }
      };
      ws.onclose = () => setTimeout(connectWS, 5000);
    }
    connectWS();

    function showToast(title, msg) {
      const container = document.getElementById('toasts');
      const t = document.createElement('div');
      t.className = 'toast';
      t.innerHTML = `<div class="toast-h">${title}</div><div class="toast-m">${msg}</div>`;
      container.appendChild(t);
      anime({ targets: t, opacity: [0, 1], translateX: [50, 0], duration: 400 });
      setTimeout(() => {
        anime({ targets: t, opacity: 0, translateX: 50, duration: 400, complete: () => t.remove() });
      }, 5000);
    }

    function scrollToBottom() {
      scroller.scrollTop = scroller.scrollHeight;
    }

    // â”€â”€â”€ ENTRANCE â”€â”€â”€
    window.onload = () => {
      anime({ targets: '.sidebar', translateX: [-64, 0], opacity: [0, 1], duration: 800, easing: 'easeOutExpo' });
      anime({ targets: '.welcome-hero', translateY: [20, 0], opacity: [0, 1], duration: 800, delay: 200 });
      anime({ targets: '.right-panel', translateX: [300, 0], opacity: [0, 1], duration: 800, delay: 400 });
      setInterval(() => {
        const n = new Date();
        document.getElementById('clock').innerText = n.getHours().toString().padStart(2, '0') + ":" + n.getMinutes().toString().padStart(2, '0');
      }, 1000);
    };
  </script>
</body>

</html>